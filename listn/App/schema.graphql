query Album($query:AlbumQueryInput) {
    albums (query:$query){
        ...AlbumDetail
    }
}

query Artist($query:ArtistQueryInput) {
    artists (query:$query) {
    ...ArtistDetail
    }
}

query LatestReviews {
    reviews(
        sortBy: DATE_DESC
        limit: 20
    ) {
        ...ReviewDetail
        
    }
}

fragment ArtistDetail on Artist {
    name
    _id
    image
    streamingUrls {
        appleMusic
        spotify
    }
}

fragment AlbumDetail on Album {
    artist {
        ...ArtistDetail
    }
    _id
    name
    artwork
    genres
    releaseDate
    recordLabel
    streamingUrls {
        appleMusic
        spotify
    }
}

fragment ReviewDetail on Review {
    album {
        ...AlbumDetail
    }
    artist {
        ...ArtistDetail
    }
    reviewer {
        ...ReviewerDetail
    }
    _id
    link
    date
    score

}

fragment UserReviewDetail on UserReview {
    album {
        ...AlbumDetail
    }
    user {
        ...UserDetail
    }
    _id
    date
    score
    text
}

fragment ReviewerDetail on Reviewer {
    _id
    link
    name
}

fragment UserDetail on User {
    _id
    name
    username
}

query Reviews($query:ReviewQueryInput, $limit:Int = 100) {
    reviews (query: $query, limit:$limit, sortBy: DATE_DESC) {
        ...ReviewDetail
    }
}

query UserReviews($query:UserReviewQueryInput, $limit:Int = 20) {
    userReviews(query: $query, limit:$limit) {
        ...UserReviewDetail
    }
}

query Reviewers($query:ReviewerQueryInput) {
    reviewers(query:$query) {
        ...ReviewerDetail
    }
}

query AlbumSearch($input:String) {
    AlbumSearch(input:{query:$input}) {
        albums
    }
}

query ArtistSearch($input:String) {
    ArtistSearch(input:{query:$input}) {
        artists
    }
}

query Search($input:String) {
    Search(input:{query:$input}) {
        artists
        albums
        reviewers
    }
}

